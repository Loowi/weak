#ifndef MAGIC_HEADER
#define MAGIC_HEADER

#define MAGIC_BISHOP 0
#define MAGIC_ROOK 1

#include "weak.h"

BitBoard *BishopThreatBase[64];
BitBoard *RookThreatBase[64];

// See http://chessprogramming.wikispaces.com/First+Rank+Attacks
BitBoard FirstRankAttacks[64*8];

static const BitBoard magicBoard[2][64] = {
  // Bishop.
  {
    C64(0x2180008451400022),
    C64(0x4400040100060000),
    C64(0x8020008010012800),
    C64(0x4801000804c08000),
    C64(0x1000406110028000),
    C64(0xa001504900e00080),
    C64(0x1000402000081000),
    C64(0x3000024890000420),
    C64(0x1205002101800840),
    C64(0x4400020100044000),
    C64(0x5001048200500000),
    C64(0x446002030c200090),
    C64(0x12000450602a0000),
    C64(0x1003000b00140038),
    C64(0x1000300020004000),
    C64(0x1001082024100000),
    C64(0x1110100204480000),
    C64(0x8138080200040040),
    C64(0x9000801080200000),
    C64(0x48a2020008405022),
    C64(0x6110100300800140),
    C64(0x2001010014002208),
    C64(0x4010400080201100),
    C64(0x1006000110468c00),
    C64(0x1400490800040210),
    C64(0x4020004008500400),
    C64(0x4080900080200084),
    C64(0x1010021004810000),
    C64(0x2002200101884000),
    C64(0x400800a008000000),
    C64(0x88200020088015c0),
    C64(0x5001138600010464),
    C64(0xc000808000280000),
    C64(0x4050002004400043),
    C64(0x4200120021800000),
    C64(0x1000801808010000),
    C64(0x1490402808008000),
    C64(0x2020004008002800),
    C64(0x12501080c000a100),
    C64(0x1804025402000693),
    C64(0x1110401280218000),
    C64(0x4004020100040000),
    C64(0x4110002000848010),
    C64(0x400d980010008080),
    C64(0x1001108010004000),
    C64(0x4012360004008080),
    C64(0x8088a10040005000),
    C64(0x1180450050860004),
    C64(0x5008000410229000),
    C64(0x1004060820200000),
    C64(0x4040c20080302200),
    C64(0x204501100020ad00),
    C64(0x8000800140080800),
    C64(0x4004000200808000),
    C64(0x2652004c08090a00),
    C64(0x800008841042a000),
    C64(0x4001008422041242),
    C64(0x4144100322202820),
    C64(0x80842a0010098910),
    C64(0x2080409002010010),
    C64(0x3001000234900801),
    C64(0x2100022814000100),
    C64(0x2900200880104000),
    C64(0x2204270040840200)
  },
  // Rook.
  {
    C64(0x2801121400080000),
    C64(0x4000300040200000),
    C64(0x1800810008520010),
    C64(0x23001000a1004428),
    C64(0x20800800060c0080),
    C64(0x4200040510080200),
    C64(0x4000800827004010),
    C64(0x4080004930800100),
    C64(0xc100210880004000),
    C64(0x4540100020004000),
    C64(0x1010010430060000),
    C64(0x41000b1001002000),
    C64(0x1000801021004000),
    C64(0x3087000b00040018),
    C64(0x2000200280409000),
    C64(0x1090000408201000),
    C64(0x1280004000402000),
    C64(0x3009400051200000),
    C64(0x40a44900200100d0),
    C64(0x3402020018104420),
    C64(0x120080806c001800),
    C64(0x4102008004000280),
    C64(0x4008040005500816),
    C64(0x81020004a4490400),
    C64(0x1008400080008220),
    C64(0x4000200240015005),
    C64(0x4100411200220080),
    C64(0x19e2020012084000),
    C64(0x4204028008008000),
    C64(0x4220022001004090),
    C64(0x2004104009006080),
    C64(0x1602082000054010),
    C64(0x20a0204001800080),
    C64(0x420c81c011802000),
    C64(0x1100410020000000),
    C64(0x4009004210009000),
    C64(0x1004808400800800),
    C64(0x4004100400200000),
    C64(0x1001800100802600),
    C64(0x4010030082000044),
    C64(0x5808208040008002),
    C64(0x2050046000400000),
    C64(0x8016000410100110),
    C64(0x1809001000a10008),
    C64(0x3020020a40a00100),
    C64(0x2904004080120000),
    C64(0x1903804002200000),
    C64(0x430104a940200010),
    C64(0x8040068008308000),
    C64(0xa102004082000000),
    C64(0x1420004101000000),
    C64(0x8410120100109000),
    C64(0x2810401080080000),
    C64(0x80500080a0401000),
    C64(0x1182285027440000),
    C64(0x200200a401004a00),
    C64(0x4000408001002011),
    C64(0x2804001205281010),
    C64(0x1002004400811000),
    C64(0x4010012100140900),
    C64(0x4020044201039060),
    C64(0x4820014119008320),
    C64(0x8000510064888140),
    C64(0x4020410084020000)
  }};

static const BitBoard magicMask[2][64] = {
  // Bishop.
  {
    C64(0x4020100804020000),
    C64(0x4020100804000000),
    C64(0x4020100a00000000),
    C64(0x4022140000000000),
    C64(0x2442800000000000),
    C64(0x2040850000000000),
    C64(0x2040810200000000),
    C64(0x2040810204000000),
    C64(0x2010080402000000),
    C64(0x4020100804000000),
    C64(0x4020100a00000000),
    C64(0x4022140000000000),
    C64(0x2442800000000000),
    C64(0x2040850000000000),
    C64(0x2040810200000000),
    C64(0x4081020400000000),
    C64(0x1008040200020000),
    C64(0x2010080400040000),
    C64(0x4020100a000a0000),
    C64(0x4022140014000000),
    C64(0x2442800280000000),
    C64(0x2040850005000000),
    C64(0x4081020002000000),
    C64(0x8102040004000000),
    C64(0x8040200020400000),
    C64(0x1008040004080000),
    C64(0x20100a000a100000),
    C64(0x4022140014220000),
    C64(0x2442800284400000),
    C64(0x4085000500800000),
    C64(0x8102000201000000),
    C64(0x1020400040200000),
    C64(0x4020002040800000),
    C64(0x8040004081000000),
    C64(0x100a000a10200000),
    C64(0x2214001422400000),
    C64(0x4428002844020000),
    C64(0x8500050080400000),
    C64(0x1020002010080000),
    C64(0x2040004020100000),
    C64(0x2000204081000000),
    C64(0x4000408102000000),
    C64(0xa000a10204000000),
    C64(0x1400142240000000),
    C64(0x2800284402000000),
    C64(0x5000500804020000),
    C64(0x2000201008040000),
    C64(0x4000402010080000),
    C64(0x2040810200000000),
    C64(0x4081020400000000),
    C64(0xa102040000000000),
    C64(0x1422400000000000),
    C64(0x2844020000000000),
    C64(0x5008040200000000),
    C64(0x2010080402000000),
    C64(0x4020100804000000),
    C64(0x2040810204000000),
    C64(0x4081020400000000),
    C64(0xa102040000000000),
    C64(0x1422400000000000),
    C64(0x2844020000000000),
    C64(0x5008040200000000),
    C64(0x2010080402000000),
    C64(0x4020100804020000)
  },
  // Rook.
  {
    C64(0x101010101017e000),
    C64(0x202020202027c000),
    C64(0x404040404047a000),
    C64(0x8080808080876000),
    C64(0x1010101010106e00),
    C64(0x2020202020205e00),
    C64(0x4040404040403e00),
    C64(0x8080808080807e00),
    C64(0x1010101017e00000),
    C64(0x2020202027c00000),
    C64(0x4040404047a00000),
    C64(0x8080808087600000),
    C64(0x10101010106e0000),
    C64(0x20202020205e0000),
    C64(0x40404040403e0000),
    C64(0x80808080807e0000),
    C64(0x10101017e0100000),
    C64(0x20202027c0200000),
    C64(0x40404047a0400000),
    C64(0x8080808760800000),
    C64(0x101010106e100000),
    C64(0x202020205e200000),
    C64(0x404040403e400000),
    C64(0x808080807e800000),
    C64(0x101017e010100000),
    C64(0x202027c020200000),
    C64(0x404047a040400000),
    C64(0x8080876080800000),
    C64(0x1010106e10100000),
    C64(0x2020205e20200000),
    C64(0x4040403e40400000),
    C64(0x8080807e80800000),
    C64(0x1017e01010100000),
    C64(0x2027c02020200000),
    C64(0x4047a04040400000),
    C64(0x8087608080800000),
    C64(0x10106e1010100000),
    C64(0x20205e2020200000),
    C64(0x40403e4040400000),
    C64(0x80807e8080800000),
    C64(0x17e0101010100000),
    C64(0x27c0202020200000),
    C64(0x47a0404040400000),
    C64(0x8760808080800000),
    C64(0x106e101010100000),
    C64(0x205e202020200000),
    C64(0x403e404040400000),
    C64(0x807e808080800000),
    C64(0x7e01010101010000),
    C64(0x7c02020202020000),
    C64(0x7a04040404040000),
    C64(0x7608080808080000),
    C64(0x6e10101010100000),
    C64(0x5e20202020200000),
    C64(0x3e40404040400000),
    C64(0x7e80808080800000),
    C64(0x7e01010101010100),
    C64(0x7c02020202020200),
    C64(0x7a04040404040400),
    C64(0x7608080808080800),
    C64(0x6e10101010101000),
    C64(0x5e20202020202000),
    C64(0x3e40404040404000),
    C64(0x7e80808080808000)
  }};

static const int magicShift[2][64] = {
  // Bishop.
  {
    58,
    59,
    59,
    59,
    59,
    59,
    59,
    58,
    59,
    59,
    59,
    59,
    59,
    59,
    59,
    59,
    59,
    59,
    57,
    57,
    57,
    57,
    59,
    59,
    59,
    59,
    57,
    55,
    55,
    57,
    59,
    59,
    59,
    59,
    57,
    55,
    55,
    57,
    59,
    59,
    59,
    59,
    57,
    57,
    57,
    57,
    59,
    59,
    59,
    59,
    59,
    59,
    59,
    59,
    59,
    59,
    58,
    59,
    59,
    59,
    59,
    59,
    59,
    58
  },
  // Rook.
  {
    52,
    53,
    53,
    53,
    53,
    53,
    53,
    52,
    53,
    54,
    54,
    54,
    54,
    54,
    54,
    53,
    53,
    54,
    54,
    54,
    54,
    54,
    54,
    53,
    53,
    54,
    54,
    54,
    54,
    54,
    54,
    53,
    53,
    54,
    54,
    54,
    54,
    54,
    54,
    53,
    53,
    54,
    54,
    54,
    54,
    54,
    54,
    53,
    53,
    54,
    54,
    54,
    54,
    54,
    54,
    53,
    52,
    53,
    53,
    53,
    53,
    53,
    53,
    52
  }};

#endif
